<p-toast />
<p-confirmdialog [style]="{ width: '450px' }" />

<p-toolbar styleClass="mb-6">
    <ng-template #start>
        <div class="flex items-center gap-2">
            <i class="pi pi-shop"></i>
            <span class="font-bold">Gestão de Anúncios</span>
        </div>
    </ng-template>

    <ng-template #end>
        <p-button label="Voltar" icon="pi pi-history" severity="secondary" />
    </ng-template>
</p-toolbar>

<p-panel>
    <ng-template #header>
        <div class="flex items-center gap-2">
            <i class="pi pi-shopping-cart"></i>
            <span class="font-bold">Dados do Anúncio</span>
        </div>
    </ng-template>
    <ng-template #icons>
        <p-button icon="pi pi-thumbs-down" severity="primary" rounded text pTooltip="Denunciar" tooltipPosition="top" />
        <p-button icon="pi pi-tag" severity="info" rounded text pTooltip="Revisão Manual" tooltipPosition="top" />
    </ng-template>
    <p-fluid>
        <div class="grid grid-cols-4 gap-4">
            <div>
                <p-iftalabel>
                    <p-select [(ngModel)]="advertisement['st_status']" inputId="st_status" [options]="statuses" optionLabel="label" styleClass="w-full" />
                    <label for="st_status">Status</label>
                </p-iftalabel>
            </div>
            <div>
                <p-iftalabel>
                    <input pInputText id="st_plataform" [(ngModel)]="advertisement['st_plataform']" />
                    <label for="st_plataform">Plataforma</label>
                </p-iftalabel>
            </div>
            <div>
                <p-iftalabel>
                    <input pInputText id="st_plataform_id" [(ngModel)]="advertisement['st_plataform_id']" />
                    <label for="st_plataform_id">Plataforma ID</label>
                </p-iftalabel>
            </div>
            <div>
                <p-iftalabel>
                    <p-inputnumber [(ngModel)]="advertisement['db_price']" mode="currency" inputId="db_price" currency="BRL" locale="pt-BR" />
                    <label for="db_price">Preço</label>
                </p-iftalabel>
            </div>

            <div class="col-span-2">
                <p-iftalabel>
                    <input pInputText id="st_name" [(ngModel)]="advertisement['st_name']" />
                    <label for="st_name">Cliente</label>
                </p-iftalabel>
            </div>
            <div>
                <p-iftalabel>
                    <input pInputText id="st_brand" [(ngModel)]="advertisement['st_brand']" />
                    <label for="st_brand">Marca</label>
                </p-iftalabel>
            </div>
            <div>
                <p-iftalabel>
                    <input pInputText id="st_product" [(ngModel)]="advertisement['st_product']" />
                    <label for="st_product">Produto</label>
                </p-iftalabel>
            </div>
            <div>
                <p-iftalabel>
                    <input pInputText id="st_vendor" [(ngModel)]="advertisement['st_vendor']" />
                    <label for="st_vendor">Vendedor</label>
                </p-iftalabel>
            </div>
            <div class="col-span-full">
                <p-iftalabel>
                    <input pInputText id="st_title" [(ngModel)]="advertisement['st_title']" />
                    <label for="st_title">Título do Anúncio</label>
                </p-iftalabel>
            </div>
            <div class="col-span-full">
                <p-iftalabel>
                    <input pInputText id="st_description" [(ngModel)]="advertisement['st_description']" />
                    <label for="st_description">Descrição</label>
                </p-iftalabel>
            </div>
            <div class="col-span-full">
                <p-iftalabel>
                    <input pInputText id="st_url" [(ngModel)]="advertisement['st_url']" />
                    <label for="st_url">URL</label>
                </p-iftalabel>
            </div>
            <div class="col-span-full">
                <p-galleria [value]="advertisement['st_photos']?.split(',')" indicatorsPosition="left" [showIndicators]="true" [showThumbnails]="false" showIndicatorsOnItem="true" [containerStyle]="{ 'max-width': '640px', 'margin-top': '2em' }" >
                    <ng-template pTemplate="item" let-item>
                        <img [src]="item.itemImageSrc" style="width: 100%; display: block;" />
                    </ng-template>
                </p-galleria>
            </div>
        </div>
    </p-fluid>
</p-panel>
<br />
<p-panel>
    <ng-template #header>
        <div class="flex items-center gap-2">
            <i class="pi pi-shopping-cart"></i>
            <span class="font-bold">Produtos</span>
        </div>
    </ng-template>
    <p-table
        #dt
        [value]="products"
        [rows]="10"
        [tableStyle]="{ 'min-width': '75rem' }"
        [rowHover]="true"
        dataKey="id_product"
    >
        <ng-template #header>
            <tr>
                <th pSortableColumn="st_name" style="min-width: 20rem">
                    Cliente
                    <p-sortIcon field="st_name" />
                </th>
                <th pSortableColumn="st_brand" style="min-width: 20rem">
                    Marca
                    <p-sortIcon field="st_brand" />
                </th>
                <th pSortableColumn="st_product" style="min-width:20rem">
                    Produto
                    <p-sortIcon field="st_product" />
                </th>
                <th pSortableColumn="st_variety" style="min-width:20rem">
                    Variedade
                    <p-sortIcon field="st_variety" />
                </th>
                <th pSortableColumn="db_price" style="min-width: 9rem">
                    Preço Base
                    <p-sortIcon field="db_price" />
                </th>
            </tr>
        </ng-template>
        <ng-template #body let-advertisement>
            <tr>
                <td>{{ advertisement.st_name }}</td>
                <td>{{ advertisement.st_brand }}</td>
                <td>{{ advertisement.st_product }}</td>
                <td>{{ advertisement.st_variety }}</td>
                <td>{{ advertisement.db_price | currency: 'BRL':'symbol':'1.2-2':'pt-BR' }}</td>
            </tr>
        </ng-template>
    </p-table>
</p-panel>
<br />
<p-panel>
    <ng-template #header>
        <div class="flex items-center gap-2">
            <i class="pi pi-history"></i>
            <span class="font-bold">Histórico</span>
        </div>
    </ng-template>
    <p-table
        #dt
        [value]="products"
        [rows]="10"
        [tableStyle]="{ 'min-width': '75rem' }"
        [rowHover]="true"
        dataKey="id_product"
    >
        <ng-template #header>
            <tr>
                <th pSortableColumn="dt_history" style="min-width: 20rem">
                    Data
                    <p-sortIcon field="dt_history" />
                </th>
                <th pSortableColumn="st_status" style="min-width: 20rem">
                    Status
                    <p-sortIcon field="st_status" />
                </th>
                <th pSortableColumn="st_action" style="min-width:20rem">
                    Ação
                    <p-sortIcon field="st_action" />
                </th>
                <th pSortableColumn="st_history" style="min-width:20rem">
                    Histórico
                    <p-sortIcon field="st_history" />
                </th>
            </tr>
        </ng-template>
        <ng-template #body let-advertisement>
            <tr>
                <td>{{ advertisement.dt_history | date:'dd/MM/yyyy HH:mm:ss' }}</td>
                <td>{{ advertisement.st_status }}</td>
                <td>{{ advertisement.st_action }}</td>
                <td>{{ advertisement.st_history }}</td>
            </tr>
        </ng-template>
    </p-table>
</p-panel>